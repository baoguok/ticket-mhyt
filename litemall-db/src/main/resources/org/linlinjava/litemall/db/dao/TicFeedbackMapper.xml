<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.linlinjava.litemall.db.dao.TicFeedbackMapper" >
  <resultMap id="BaseResultMap" type="org.linlinjava.litemall.db.domain.TicFeedback" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="fee_id" jdbcType="INTEGER" property="feeId" />
    <result column="fee_user_id" jdbcType="INTEGER" property="feeUserId" />
    <result column="fee_username" jdbcType="VARCHAR" property="feeUsername" />
    <result column="fee_mobile" jdbcType="VARCHAR" property="feeMobile" />
    <result column="fee_type" jdbcType="VARCHAR" property="feeType" />
    <result column="fee_content" jdbcType="VARCHAR" property="feeContent" />
    <result column="fee_status" jdbcType="INTEGER" property="feeStatus" />
    <result column="fee_has_picture" jdbcType="BIT" property="feeHasPicture" />
    <result column="fee_pic_urls" jdbcType="VARCHAR" property="feePicUrls" typeHandler="org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler" />
    <result column="fee_add_time" jdbcType="TIMESTAMP" property="feeAddTime" />
    <result column="fee_update_time" jdbcType="TIMESTAMP" property="feeUpdateTime" />
    <result column="fee_deleted" jdbcType="BIT" property="feeDeleted" />
  </resultMap>
  <resultMap id="BaseResultMapName" type="org.linlinjava.litemall.db.response.TicFeedBackResponse" extends="BaseResultMap">
    <result column="user_name" property="userName" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.feePicUrlsCriteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler} and #{criterion.secondValue,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.feePicUrlsCriteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler} and #{criterion.secondValue,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    fee_id, fee_user_id, fee_username, fee_mobile, fee_type, fee_content, fee_status, 
    fee_has_picture, fee_pic_urls, fee_add_time, fee_update_time, fee_deleted
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="org.linlinjava.litemall.db.domain.TicFeedbackExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from tic_feedback
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from tic_feedback
    where fee_id = #{feeId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from tic_feedback
    where fee_id = #{feeId,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="org.linlinjava.litemall.db.domain.TicFeedbackExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from tic_feedback
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="org.linlinjava.litemall.db.domain.TicFeedback" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey resultType="java.lang.Integer" keyProperty="feeId" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into tic_feedback (fee_user_id, fee_username, fee_mobile, 
      fee_type, fee_content, fee_status, 
      fee_has_picture, fee_pic_urls, fee_add_time, 
      fee_update_time, fee_deleted)
    values (#{feeUserId,jdbcType=INTEGER}, #{feeUsername,jdbcType=VARCHAR}, #{feeMobile,jdbcType=VARCHAR}, 
      #{feeType,jdbcType=VARCHAR}, #{feeContent,jdbcType=VARCHAR}, #{feeStatus,jdbcType=INTEGER}, 
      #{feeHasPicture,jdbcType=BIT}, #{feePicUrls,jdbcType=VARCHAR,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler}, 
      #{feeAddTime,jdbcType=TIMESTAMP}, #{feeUpdateTime,jdbcType=TIMESTAMP}, #{feeDeleted,jdbcType=BIT}
      )
  </insert>
  <insert id="insertSelective" parameterType="org.linlinjava.litemall.db.domain.TicFeedback" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey resultType="java.lang.Integer" keyProperty="feeId" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into tic_feedback
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="feeUserId != null" >
        fee_user_id,
      </if>
      <if test="feeUsername != null" >
        fee_username,
      </if>
      <if test="feeMobile != null" >
        fee_mobile,
      </if>
      <if test="feeType != null" >
        fee_type,
      </if>
      <if test="feeContent != null" >
        fee_content,
      </if>
      <if test="feeStatus != null" >
        fee_status,
      </if>
      <if test="feeHasPicture != null" >
        fee_has_picture,
      </if>
      <if test="feePicUrls != null" >
        fee_pic_urls,
      </if>
      <if test="feeAddTime != null" >
        fee_add_time,
      </if>
      <if test="feeUpdateTime != null" >
        fee_update_time,
      </if>
      <if test="feeDeleted != null" >
        fee_deleted,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="feeUserId != null" >
        #{feeUserId,jdbcType=INTEGER},
      </if>
      <if test="feeUsername != null" >
        #{feeUsername,jdbcType=VARCHAR},
      </if>
      <if test="feeMobile != null" >
        #{feeMobile,jdbcType=VARCHAR},
      </if>
      <if test="feeType != null" >
        #{feeType,jdbcType=VARCHAR},
      </if>
      <if test="feeContent != null" >
        #{feeContent,jdbcType=VARCHAR},
      </if>
      <if test="feeStatus != null" >
        #{feeStatus,jdbcType=INTEGER},
      </if>
      <if test="feeHasPicture != null" >
        #{feeHasPicture,jdbcType=BIT},
      </if>
      <if test="feePicUrls != null">
        #{feePicUrls,jdbcType=VARCHAR,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler},
      </if>
      <if test="feeAddTime != null" >
        #{feeAddTime,jdbcType=TIMESTAMP},
      </if>
      <if test="feeUpdateTime != null" >
        #{feeUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="feeDeleted != null" >
        #{feeDeleted,jdbcType=BIT},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="org.linlinjava.litemall.db.domain.TicFeedbackExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from tic_feedback
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update tic_feedback
    <set >
      <if test="record.feeId != null" >
        fee_id = #{record.feeId,jdbcType=INTEGER},
      </if>
      <if test="record.feeUserId != null" >
        fee_user_id = #{record.feeUserId,jdbcType=INTEGER},
      </if>
      <if test="record.feeUsername != null" >
        fee_username = #{record.feeUsername,jdbcType=VARCHAR},
      </if>
      <if test="record.feeMobile != null" >
        fee_mobile = #{record.feeMobile,jdbcType=VARCHAR},
      </if>
      <if test="record.feeType != null" >
        fee_type = #{record.feeType,jdbcType=VARCHAR},
      </if>
      <if test="record.feeContent != null" >
        fee_content = #{record.feeContent,jdbcType=VARCHAR},
      </if>
      <if test="record.feeStatus != null" >
        fee_status = #{record.feeStatus,jdbcType=INTEGER},
      </if>
      <if test="record.feeHasPicture != null" >
        fee_has_picture = #{record.feeHasPicture,jdbcType=BIT},
      </if>
      <if test="record.feePicUrls != null">
        fee_pic_urls = #{record.feePicUrls,jdbcType=VARCHAR,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler},
      </if>
      <if test="record.feeAddTime != null" >
        fee_add_time = #{record.feeAddTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.feeUpdateTime != null" >
        fee_update_time = #{record.feeUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.feeDeleted != null" >
        fee_deleted = #{record.feeDeleted,jdbcType=BIT},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update tic_feedback
    set fee_id = #{record.feeId,jdbcType=INTEGER},
      fee_user_id = #{record.feeUserId,jdbcType=INTEGER},
      fee_username = #{record.feeUsername,jdbcType=VARCHAR},
      fee_mobile = #{record.feeMobile,jdbcType=VARCHAR},
      fee_type = #{record.feeType,jdbcType=VARCHAR},
      fee_content = #{record.feeContent,jdbcType=VARCHAR},
      fee_status = #{record.feeStatus,jdbcType=INTEGER},
      fee_has_picture = #{record.feeHasPicture,jdbcType=BIT},
      fee_pic_urls = #{record.feePicUrls,jdbcType=VARCHAR,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler},
      fee_add_time = #{record.feeAddTime,jdbcType=TIMESTAMP},
      fee_update_time = #{record.feeUpdateTime,jdbcType=TIMESTAMP},
      fee_deleted = #{record.feeDeleted,jdbcType=BIT}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="org.linlinjava.litemall.db.domain.TicFeedback" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update tic_feedback
    <set >
      <if test="feeUserId != null" >
        fee_user_id = #{feeUserId,jdbcType=INTEGER},
      </if>
      <if test="feeUsername != null" >
        fee_username = #{feeUsername,jdbcType=VARCHAR},
      </if>
      <if test="feeMobile != null" >
        fee_mobile = #{feeMobile,jdbcType=VARCHAR},
      </if>
      <if test="feeType != null" >
        fee_type = #{feeType,jdbcType=VARCHAR},
      </if>
      <if test="feeContent != null" >
        fee_content = #{feeContent,jdbcType=VARCHAR},
      </if>
      <if test="feeStatus != null" >
        fee_status = #{feeStatus,jdbcType=INTEGER},
      </if>
      <if test="feeHasPicture != null" >
        fee_has_picture = #{feeHasPicture,jdbcType=BIT},
      </if>
      <if test="feePicUrls != null">
        fee_pic_urls = #{feePicUrls,jdbcType=VARCHAR,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler},
      </if>
      <if test="feeAddTime != null" >
        fee_add_time = #{feeAddTime,jdbcType=TIMESTAMP},
      </if>
      <if test="feeUpdateTime != null" >
        fee_update_time = #{feeUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="feeDeleted != null" >
        fee_deleted = #{feeDeleted,jdbcType=BIT},
      </if>
    </set>
    where fee_id = #{feeId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="org.linlinjava.litemall.db.domain.TicFeedback" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update tic_feedback
    set fee_user_id = #{feeUserId,jdbcType=INTEGER},
      fee_username = #{feeUsername,jdbcType=VARCHAR},
      fee_mobile = #{feeMobile,jdbcType=VARCHAR},
      fee_type = #{feeType,jdbcType=VARCHAR},
      fee_content = #{feeContent,jdbcType=VARCHAR},
      fee_status = #{feeStatus,jdbcType=INTEGER},
      fee_has_picture = #{feeHasPicture,jdbcType=BIT},
      fee_pic_urls = #{feePicUrls,jdbcType=VARCHAR,typeHandler=org.linlinjava.litemall.db.mybatis.JsonStringArrayTypeHandler},
      fee_add_time = #{feeAddTime,jdbcType=TIMESTAMP},
      fee_update_time = #{feeUpdateTime,jdbcType=TIMESTAMP},
      fee_deleted = #{feeDeleted,jdbcType=BIT}
    where fee_id = #{feeId,jdbcType=INTEGER}
  </update>

  <!-- 条件查询(排序)  liuyu -->
  <select id="listFeedBack" resultMap="BaseResultMapName" parameterType="org.linlinjava.litemall.db.request.TicFeedBackRequest">
    SELECT back.* , user.use_name
    FROM tic_feedback as back, tic_user as user
    WHERE fee_deleted = 0
    AND back.fee_user_id = user.use_id
    <if test="useName !=null">
      AND use_name like CONCAT('%',#{use_name,jdbcType=VARCHAR},'%')
    </if>
    <if test="feeId != null" >
      AND fee_id = #{feeId,jdbcType=INTEGER}
    </if>
    <if test="page != null and limit != limit">
      limit #{page}, #{limit}
    </if>
  </select>
</mapper>